## 4. 파이프라인과 벡터처리
#### 1. 병렬처리
* 병렬 처리 (parallel processing)는 컴퓨터 시스템의 계산 속도 향상을 목적으로 하여 동시 데이터 처리기능을 제공하는 광범위한 개념의 기술을 의미

* 복잡도에 따른 병렬처리의 다양한 단계
    * 사용 레지스터의 형태에 따른 병렬 성 구현
        * 시프트 레지스터 VS 워드 당 동시에 전송이 가능한 병렬성을 갖는 레지스터
    * 동일한 또는 서로 다른 동작을 동시에 수행하는 여러 개의 기능 장치 (functional unit)를 가지고서 데이터를 각각의 장치에 분산 시켜 작업을 수행하는 경우
        * 산술, 논리, 시프트 동작을 세 개의 장치로 분류하고 제어장치의 관리에 따라 피 연산자를 각 장치들 사이에서 전환시킨다.
    
* M.J Flynn 의 분류 방법
    * 동시에 처리되는 명령어와 데이터 항목 에 의해 컴퓨터 시스템의 구조를 파악하려는 분류 방법 제안
        * 명령어 흐름(instruction stream) -> 메모리로 부터 읽어온 명령어의 순서
        * 데이터 흐름(data stream) -> 데이터에 대해 수행 되는 동작
    * SISD -> 단일 명령어 흐름, 단일 데이터 흐름
    * SIMD -> 단일 명령어 흐름, 다중 데이터 흐름
    * MISD -> 다중 명령어 흐름, 단일 데이터 흐름
    * MIMD -> 다중 명령어 흐름, 다중 데이터 흐름
    
* SISD
    * 제어 장치, 처리 장치, 메모리 장치를 가지는 단일 컴퓨터 구조
    * 명령어들은 순차적으로 실행되고 병렬처리는 다중 기능 장치나 파이프라인 처리에 의해서 구현
    
* SIMD
    * 공통의 제어장치 아래에 여러 개의 처리 장치를 두는 구조
    * 모든 프로세서는 동일한 명령어를 서로 다른 데이터 항목에 대하여 실행 시킬 수 있다
    * 모든 프로세서가 동시에 메모리에 접근할 수 있또록 다중 모듈을 가진 공유 메모리 장치가 필요
    
* MISD 
    * 이론적으로만 연구 되고 있음
    
* MIMD
    * 여러 프로그램을 동시에 수행하는 능력을 가진 컴퓨터 시스템
    * 대부분의 다중 프로세서와 다중 컴퓨터 시스템이 이 범주에 속함
    
> 이 분류 방식은 컴퓨터의 구조적 연계방식에 대한 고찰이기 보다는 외양적 행동 양식을 강조한 분류 방식이라고 볼 수 있다
> 
> 결국 이 분류 방식에 적합하지 않는 것이 파이프라인이다.

#### 2. 파이프라인
* 파이프라인 구조의 성능
    * 파이프라인의 동작은 공간, 시간표에 의해 설명
    * 시간에 대한 함수로서 세그먼트의 사용상황을 보여줌
    
    * 비파이프라인의 경우
      ![Alt text](./images/04_pipline_1.png "비파이프라인")

#### 3. 파이프라인 구조
1. 파이프 라인(Pipeline)의 구현
    * 하나의 프로세스를 서로 다른 기능을 가진 여러 개의 서브프로세스로 나뉘어 각 프로세스가 동시에 서로 다른 데이터를 취급하도록 하는 기법
    * 각 세그먼트에서 수행된 연산 결과는 다음 세그먼트로 연속적으로 넘어가게 되어 데이터가 마지막 세그먼트를 통과하게 되면 최정적인 연산 결과를 얻게 됨
    * 하나의 프로세스를 다양한 연산으로 중복시킬 수 있는 근간은 각 세그먼트마다의 레지스터
    * 구현의 예
      ![Alt text](images/04_pipeline_2.png "파이프라인")
      ![Alt text](images/04_pipeline_3.png "파이프라인")
    * 파이프라인 처리 예
      ![Alt text](images/04_pipeline_4.png "파이프라인")
      
2. 파이프 라인 구조와 데이터 처리
* 파이프 라인의 일반적 고찰
    * 동일한 복잡도의 부연산들로 나뉘어지는 어떠한 연산 동작도 파이프라인 프로세서에 의해 구현 될 수 있음
    * 파이프라인 기수리은 매번 다른 데이터 집합을 동일한 태스크에 적용시켜 여러번 반봅하는 응용에 효과적
      ![Alt text](images/04_pipeline_5.png "파이프라인")
      
#### 4. 산술/명령어 파이프 라인
1. 현실적인 파이프라인 구조
* 파이프라인 구조 VS 병렬적인 다중 기능 장치
    * 실제 파이프라인 구조가 이론적인 최대 속도를 구현하지 못하는 이유
        * 각 세그먼트 들이 부연산을 수행하는 시간이 서로 다름
        * 각 레지스터를 제어하는 클럭 사이클은 최대 전파시간을 갖는 세그먼트의 지연시간과 싱크를 맞추어야함
    * 병렬적인 다중 기능 장치(= 파이프라인 처리 속도)를 고려 할 수 있음
        - 각 P 회로는 전체 파이프라인 회로에서와 동일하게 테스크를 수행
        - 이 구조는 순차적 처리가 아니라 모든 회로가 동시에 데이터를 입력 받아 네 테스크를 한번에 수행
        - SIMD 구조
    * 파이프라인 구조 > 순차적 처리 구조
    
2. 파이프 라인 구조가 적용되는 컴퓨터 설계
* 산술(arithmetic) 파이프 라인
    * 산술 연산들을 부연산으로 나누어 파이프 라인의 세그먼트에서 수행
        * 고속 컴퓨터에서 부동 소수점 연산, 고정 소수점 수의 곱셈, 과학 계산용으로 활용
        * 파이프라인 승산기(배열 승산기 - 부분 곱 사이의 캐리(carry) 전파시간의 최소화를 위한 가산기 보유)
* 명령어(instruction) 파이프 라인
    * 명령어 사이클의 fetch, 디코드, 실행 단계를 중첩 시킴으로 명령어 흐름에 동작
    
3. 산술 파이프 라인
* 부동 소수점 덧셈과 뺄셈을 위한 파이프 라인
    * 입력 : 두개의 정규화 (normalized) 된 부동 소수점 이진수
      ![Alt text](images/04_pipeline_6.png "파이프라인")
    * 각 세그먼트에서 수행되는 부 연산
        1. 지수의 비교
        2. 가수의 정렬
        3. 가수의 덧셈이나 뺄셈
        4. 결과의 정규화
    

    